webpackJsonp([1],{D8LU:function(t,s){},NHnr:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("xd7I"),n={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},staticRenderFns:[]};var a=e("C7Lr")({name:"App"},n,!1,function(t){e("Raw3")},null,null).exports,o=e("e1F6"),r={name:"sigin",data:function(){return{uid:"",password:"",password0:"",isSigin:!1}},methods:{login:function(){var t=this;""!=this.uid?""!=this.password?this.ajax({method:"get",url:"http://localhost:3030/login?uid="+this.uid+"&password="+this.password}).then(function(s){console.log(s),202==s.data.code?(console.log(s.data.code),t.$socket.emit("login",t.uid),t.$store.state.user=t.uid,t.uid="",t.password="",t.password0=""):302==s.data.code?t.postMsg(s.data.Msg):t.postMsg("网络出错，请稍后再试！")}).catch(function(t){console.log(t)}):this.message("密码未输入！"):this.message("账号未输入！")},sigin:function(){var t=this;if(""!=this.uid)if(""!=this.password){if(""!=this.password0)return this.password!==this.password0?(this.message("两次输入的密码不一致！"),void(this.password0="")):void this.ajax({method:"get",url:"http://localhost:3030/sigin?uid="+this.uid+"&password="+this.password}).then(function(s){201==s.data.code?(t.postMsg(s.data.Msg),t.uid="",t.password="",t.password0="",t.isSigin=!1):301==s.data.code?t.postMsg(s.data.Msg):t.postMsg("网络出错，请稍后再试！")}).catch(function(t){console.log(t)});this.message("密码未再次输入！")}else this.message("密码未输入！");else this.message("账号未输入！")},gotoSigin:function(){this.uid="",this.password="",this.isSigin=!0},gotoLogin:function(){this.uid="",this.password="",this.password0="",this.isSigin=!1},postMsg:function(t){this.$alert(t,"PChat",{confirmButtonText:"确定"})},message:function(t){this.$message({message:t,type:"warning"})}},sockets:{loginFail:function(){this.postMsg("账号已登录！")},loginSuccess:function(){this.$router.push("/Chat")}}},d={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"wrap"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isSigin,expression:"!isSigin"}],attrs:{id:"log"}},[t._m(0),t._v(" "),e("div",[e("label",{staticClass:"tit"},[t._v("账号：")]),e("div",{staticClass:"text"},[e("el-input",{attrs:{placeholder:"请输入账号"},model:{value:t.uid,callback:function(s){t.uid=s},expression:"uid"}})],1)]),t._v(" "),e("div",[e("label",{staticClass:"tit"},[t._v("密码：")]),e("div",{staticClass:"text"},[e("el-input",{attrs:{placeholder:"请输入密码","show-password":""},model:{value:t.password,callback:function(s){t.password=s},expression:"password"}})],1)]),t._v(" "),e("div",[e("el-button",{attrs:{type:"primary",id:"login"},on:{click:t.login}},[t._v("登录")]),e("el-button",{attrs:{type:"primary",id:"sigin"},on:{click:t.gotoSigin}},[t._v("注册")])],1)]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isSigin,expression:"isSigin"}],attrs:{id:"sig"}},[t._m(1),t._v(" "),e("div",[e("label",{staticClass:"tit"},[t._v("账号：")]),e("div",{staticClass:"text"},[e("el-input",{attrs:{placeholder:"请输入账号"},model:{value:t.uid,callback:function(s){t.uid=s},expression:"uid"}})],1)]),t._v(" "),e("div",[e("label",{staticClass:"tit"},[t._v("密码：")]),e("div",{staticClass:"text"},[e("el-input",{attrs:{placeholder:"请输入密码","show-password":""},model:{value:t.password,callback:function(s){t.password=s},expression:"password"}})],1)]),t._v(" "),e("div",[e("label",{staticClass:"tit"},[t._v("确认密码：")]),e("div",{staticClass:"text"},[e("el-input",{attrs:{placeholder:"请再次输入密码","show-password":""},model:{value:t.password0,callback:function(s){t.password0=s},expression:"password0"}})],1)]),t._v(" "),e("div",[e("el-button",{attrs:{type:"primary",id:"login"},on:{click:t.gotoLogin}},[t._v("登录")]),e("el-button",{attrs:{type:"primary",id:"sigin"},on:{click:t.sigin}},[t._v("注册")])],1)])])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",[s("h1",[this._v("PChat")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",[s("h1",[this._v("PChat")])])}]};var l=e("C7Lr")(r,d,!1,function(t){e("o2gN")},"data-v-61adeab8",null).exports,u={name:"chat",data:function(){return{messages:[],users:[],logoutUser:"",loginUser:"",num:-1,num1:-1}},mounted:function(){""==this.$store.state.user&&this.$router.push("/")},updated:function(){var t=document.getElementById("message");t.scrollTop=t.scrollHeight},sockets:{logined:function(t){this.users=t[0],this.messages=t[1],this.num1=this.messages.length,this.loginUser=t[2].user},returnMsg:function(t){this.messages=t},logout:function(t){this.logoutUser=t[1].user,this.num=t[0].num-1,this.users=this.users.splice(this.users.indexOf(this.logoutUser),1)}},methods:{sendMsg:function(){var t=document.getElementById("text").value.replace(/[\r\n]/g,"");""==t?this.openVn():(this.$socket.emit("sendMsg",{user:this.$store.state.user,message:t}),document.getElementById("text").value="")},openVn:function(){var t=this.$createElement;this.$message({message:t("p",null,[t("span",null,"发送内容不能为空，请重新输入！ ")])})},close:function(){-1!=navigator.userAgent.indexOf("Firefox")||-1!=navigator.userAgent.indexOf("Chrome")?(window.location.href="about:blank",window.close()):(window.opener=null,window.open("","_self"),window.close())}}},c={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"wrap"}},[t._m(0),t._v(" "),e("div",{attrs:{id:"message"}},[e("ul",t._l(t.messages,function(s,i){return e("li",{key:i,attrs:{id:"messageList"}},[e("h3",[t._v(t._s(s.user))]),t._v(" "),e("p",[t._v(t._s(s.message))])])}),0)]),t._v(" "),e("div",{attrs:{id:"users"}},t._l(t.users,function(s,i){return e("ul",{key:i},[e("li",[t._v(t._s(s))])])}),0),t._v(" "),e("div",{attrs:{id:"input"}},[e("textarea",{attrs:{name:"",id:"text",cols:"30",rows:"10"},on:{keyup:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.sendMsg(s)}}}),t._v(" "),e("el-button",{attrs:{type:"danger",id:"exit"},on:{click:t.close}},[t._v("退出")]),t._v(" "),e("el-button",{attrs:{id:"send"},on:{click:t.sendMsg}},[t._v("发送")])],1)])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{id:"tit"}},[s("h1",[this._v("PChat")])])}]};var p=e("C7Lr")(u,c,!1,function(t){e("zfr3")},"data-v-39933c04",null).exports;i.default.use(o.a);var h=new o.a({routes:[{path:"/",name:"Login",component:l},{path:"/Chat",name:"chat",component:p}]}),g=e("jsbU"),v=e.n(g),m=(e("D8LU"),e("Muz9")),f=e.n(m),w=e("2bvH");i.default.use(w.a);var _=new w.a.Store({state:{isLogin:!1,user:""}}),x=e("Oprb"),b=e.n(x);i.default.prototype.ajax=f.a,i.default.config.productionTip=!1,i.default.use(v.a),i.default.use(new b.a({connection:"http://127.0.0.1:3030"})),new i.default({el:"#app",router:h,store:_,components:{App:a},template:"<App/>",render:function(t){return t(a)}})},Raw3:function(t,s){},o2gN:function(t,s){},zfr3:function(t,s){}},["NHnr"]);
//# sourceMappingURL=app.c67eaad05727dde31e6c.js.map
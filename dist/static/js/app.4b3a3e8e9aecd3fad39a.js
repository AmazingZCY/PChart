webpackJsonp([1],{D8LU:function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("xd7I"),o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var n=s("C7Lr")({name:"App"},o,!1,function(e){s("Raw3")},null,null).exports,i=s("e1F6"),a={name:"sigin",data:function(){var e=this;return{ruleForm:{pass:"",checkPass:"",uid:""},isSigin:!1,rules:{pass:[{validator:function(t,s,r){""===s?r(new Error("请输入密码")):(""!==e.ruleForm.checkPass&&e.$refs.ruleForm.validateField("checkPass"),r())},trigger:"blur"}],checkPass:[{validator:function(t,s,r){""===s?r(new Error("请再次输入密码")):s!==e.ruleForm.pass?r(new Error("两次输入密码不一致!")):r()},trigger:"blur"}],uid:[{validator:function(e,t,s){return t?t.length>12?s(new Error("账号长度过长！")):void 0:s(new Error("账号不能为空"))},trigger:"blur"}]}}},methods:{login:function(){var e=this;this.ajax({method:"get",url:"http://localhost:3030/login?uid="+this.ruleForm.uid+"&password="+this.ruleForm.pass}).then(function(t){console.log(t),202==t.data.code?(console.log(t.data.code),e.$socket.emit("login",e.ruleForm.uid),e.$store.state.user=e.ruleForm.uid,e.ruleForm.uid="",e.ruleForm.pass="",e.ruleForm.checkPass=""):302==t.data.code?e.postMsg(t.data.Msg):e.postMsg("网络出错，请稍后再试！")}).catch(function(e){console.log(e)})},sigin:function(){var e=this;this.ajax({method:"get",url:"http://localhost:3030/sigin?uid="+this.ruleForm.uid+"&password="+this.ruleForm.pass}).then(function(t){201==t.data.code?(e.postMsg(t.data.Msg),e.ruleForm.uid="",e.ruleForm.pass="",e.ruleForm.checkPass="",e.isSigin=!1):301==t.data.code?e.postMsg(t.data.Msg):e.postMsg("网络出错，请稍后再试！")}).catch(function(e){console.log(e)})},gotoSigin:function(){this.ruleForm.uid="",this.ruleForm.pass="",this.isSigin=!0},gotoLogin:function(){this.ruleForm.uid="",this.ruleForm.pass="",this.ruleForm.checkPass="",this.isSigin=!1},postMsg:function(e){this.$alert(e,"PChat",{confirmButtonText:"确定"})},message:function(e){this.$message({message:e,type:"warning"})}},sockets:{loginFail:function(){this.postMsg("账号已登录！")},loginSuccess:function(){this.$router.push("/Chat")}}},u={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"wrap"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:!e.isSigin,expression:"!isSigin"}],attrs:{id:"log"}},[s("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"账号",prop:"uid"}},[s("el-input",{model:{value:e.ruleForm.uid,callback:function(t){e.$set(e.ruleForm,"uid",e._n(t))},expression:"ruleForm.uid"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"密码",prop:"pass"}},[s("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.pass,callback:function(t){e.$set(e.ruleForm,"pass",t)},expression:"ruleForm.pass"}})],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary",id:"login"},on:{click:e.login}},[e._v("登录")]),e._v(" "),s("el-button",{attrs:{id:"sigin"},on:{click:e.gotoSigin}},[e._v("注册")])],1)],1)],1),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isSigin,expression:"isSigin"}],attrs:{id:"sig"}},[s("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"账号",prop:"uid"}},[s("el-input",{model:{value:e.ruleForm.uid,callback:function(t){e.$set(e.ruleForm,"uid",e._n(t))},expression:"ruleForm.uid"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"密码",prop:"pass"}},[s("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.pass,callback:function(t){e.$set(e.ruleForm,"pass",t)},expression:"ruleForm.pass"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[s("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.checkPass,callback:function(t){e.$set(e.ruleForm,"checkPass",t)},expression:"ruleForm.checkPass"}})],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary",id:"login"},on:{click:e.gotoLogin}},[e._v("登录")]),e._v(" "),s("el-button",{attrs:{id:"sigin"},on:{click:e.sigin}},[e._v("注册")])],1)],1)],1)])},staticRenderFns:[]};var l=s("C7Lr")(a,u,!1,function(e){s("lBf7")},"data-v-7ce66333",null).exports,c={name:"chat",data:function(){return{messages:[],users:[],logoutUser:"",loginUser:"",num:-1,num1:-1}},mounted:function(){""==this.$store.state.user&&this.$router.push("/")},updated:function(){var e=document.getElementById("message");e.scrollTop=e.scrollHeight},sockets:{logined:function(e){this.users=e[0],this.messages=e[1],this.num1=this.messages.length,this.loginUser=e[2].user},returnMsg:function(e){this.messages=e},logout:function(e){this.logoutUser=e[1].user,this.num=e[0].num-1,this.users=this.users.splice(this.users.indexOf(this.logoutUser),1)}},methods:{sendMsg:function(){var e=document.getElementById("text").value.replace(/[\r\n]/g,"");""==e?this.openVn():(this.$socket.emit("sendMsg",{user:this.$store.state.user,message:e}),document.getElementById("text").value="")},openVn:function(){var e=this.$createElement;this.$message({message:e("p",null,[e("span",null,"发送内容不能为空，请重新输入！ ")])})},close:function(){-1!=navigator.userAgent.indexOf("Firefox")||-1!=navigator.userAgent.indexOf("Chrome")?(window.location.href="about:blank",window.close()):(window.opener=null,window.open("","_self"),window.close())}}},d={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"wrap"}},[e._m(0),e._v(" "),s("div",{attrs:{id:"message"}},[s("ul",e._l(e.messages,function(t,r){return s("li",{key:r,attrs:{id:"messageList"}},[s("h3",[e._v(e._s(t.user))]),e._v(" "),s("p",[e._v(e._s(t.message))])])}),0)]),e._v(" "),s("div",{attrs:{id:"users"}},e._l(e.users,function(t,r){return s("ul",{key:r},[s("li",[e._v(e._s(t))])])}),0),e._v(" "),s("div",{attrs:{id:"input"}},[s("textarea",{attrs:{name:"",id:"text",cols:"30",rows:"10"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendMsg(t)}}}),e._v(" "),s("el-button",{attrs:{type:"danger",id:"exit"},on:{click:e.close}},[e._v("退出")]),e._v(" "),s("el-button",{attrs:{id:"send"},on:{click:e.sendMsg}},[e._v("发送")])],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"tit"}},[t("h1",[this._v("PChat")])])}]};var m=s("C7Lr")(c,d,!1,function(e){s("zfr3")},"data-v-39933c04",null).exports;r.default.use(i.a);var p=new i.a({routes:[{path:"/",name:"Login",component:l},{path:"/Chat",name:"chat",component:m}]}),g=s("jsbU"),h=s.n(g),f=(s("D8LU"),s("Muz9")),v=s.n(f),F=s("2bvH");r.default.use(F.a);var _=new F.a.Store({state:{isLogin:!1,user:""}}),w=s("Oprb"),k=s.n(w);r.default.prototype.ajax=v.a,r.default.config.productionTip=!1,r.default.use(h.a),r.default.use(new k.a({connection:"http://127.0.0.1:3030"})),new r.default({el:"#app",router:p,store:_,components:{App:n},template:"<App/>",render:function(e){return e(n)}})},Raw3:function(e,t){},lBf7:function(e,t){},zfr3:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.4b3a3e8e9aecd3fad39a.js.map